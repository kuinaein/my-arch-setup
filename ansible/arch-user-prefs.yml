- hosts: all
  become: no
  connection: local

  pre_tasks:
    - group_by: key=arch
      changed_when: false

    - copy:
        dest: '{{ home_dir }}/{{ item }}'
        src: '{{ item }}'
      with_items:
        - .bashrc
        - .xprofile

    - name: fcitxの設定を行う
      lineinfile:
        path: '{{ home_dir }}/.config/fcitx/{{ item.subpath }}'
        regexp: '{{ item.regexp }}'
        line: '{{ item.line }}'
      with_items:
        - subpath: config
          regexp: ^TriggerKey=
          line: TriggerKey=ZENKAKUHANKAKU
        - subpath: conf/fcitx-clipboard.config
          regexp: ^#?HistoryLength=5
          line: HistoryLength=16

    - name: MATEパネルの設定を行う
      dconf: key={{ item.key }} value={{ item.value }}
      with_items:
        # 右寄せ有効だとウィンドウ一覧が隠れる
        - key: /org/mate/panel/objects/clock/panel-right-stick
          value: 'false'
        - key: /org/mate/panel/objects/clock/position
          value: '640'
        - key: /org/mate/panel/objects/notification-area/panel-right-stick
          value: 'false'
        - key: /org/mate/panel/objects/notification-area/position
          value: '440'
        - key: /org/mate/panel/toplevels/bottom/orientation
          value: "'right'"

    - name: MATEメニューを設定する
      copy:
        dest: '{{ home_dir }}/.linuxmint/mintMenu/applications.list'
        src: mate-applications.list

    - name: Cajaの設定を行う
      dconf: key={{ item.key }} value={{ item.value }}
      with_items:
        - key: /org/mate/caja/preferences/show-hidden-files
          value: 'true'
        - key: /org/mate/caja/preferences/default-folder-viewer
          value: "'list-view'"

  roles:
    - common-prefs
    - devtools-prefs
    - strelitzia
